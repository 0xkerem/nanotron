#!/bin/bash
#SBATCH --job-name=download_the_pile_from_hf_hub
#SBATCH --partition=hopper-cpu
#SBATCH --requeue
#SBATCH --time=18:00:00
#SBATCH --cpus-per-task=96
#SBATCH --mem-per-cpu=500
#SBATCH --qos=high
#SBATCH --array=0
#SBATCH -o /fsx/phuc/project_data/doremi/logs/data/doremi-%j-%a-%x.out

export XDG_CACHE_HOME=/fsx/phuc/.cache/huggingface_cache

REPO=/fsx/phuc/projects/nanotron
PROCESSET_DATASET_SCRIPT=$REPO/examples/doremi/data/download_the_pile.py


echo "START TIME: $(date)"
echo "Running task ID: $SLURM_ARRAY_TASK_ID"

srun python3 $PROCESSET_DATASET_SCRIPT

echo "END TIME: $(date)"
